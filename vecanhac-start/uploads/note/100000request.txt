âœ… Dá»¯ liá»‡u mÃ¬nh biáº¿t tá»« lá»‹ch sá»­ chat
Dá»± Ã¡n vecanhac.com cá»§a báº¡n cÃ³ cÃ¡c Ä‘áº·c Ä‘iá»ƒm sau:

Yáº¿u tá»‘	ThÃ´ng tin tá»« lá»‹ch sá»­
ğŸ§± Backend	Spring Boot, cáº¥u trÃºc DDD 4 module (start, application, domain, infrastructure)
ğŸ” Auth	JWT lÆ°u trong cookie, @Controller REST
ğŸ§  DB	MySQL vá»›i schema chuáº©n 12 báº£ng: users, orders, tickets, payments,...
ğŸš€ Checkout	Táº¡o order khi user nháº¥n thanh toÃ¡n â†’ tráº¡ng thÃ¡i PENDING â†’ xá»­ lÃ½ sau
ğŸ’° Thanh toÃ¡n	Qua VNPAY, cÃ³ xá»­ lÃ½ callback / webhook
ğŸ§  Redis	Dá»± Ä‘á»‹nh dÃ¹ng Redis Ä‘á»ƒ lock vÃ© theo TTL 15 phÃºt
ğŸ“© Email	HÆ°á»›ng tá»›i dÃ¹ng async qua @Async hoáº·c Queue
ğŸ§¹ Scheduled	CÃ³ @Scheduled job Ä‘á»ƒ cleanup order háº¿t háº¡n
ğŸ–¥ï¸ Frontend	Next.js vá»›i Tailwind CSS, fetch qua API

ğŸ”¥ PhÃ¢n tÃ­ch kháº£ nÄƒng chá»‹u táº£i: 100.000 request cÃ¹ng lÃºc
ğŸ’¡ TrÆ°á»ng há»£p: khi má»Ÿ bÃ¡n vÃ© concert SÆ¡n TÃ¹ng hay BlackPink, 100.000 ngÆ°á»i vÃ o trong 5â€“10 giÃ¢y Ä‘áº§u tiÃªn

1. âš ï¸ Nhá»¯ng rÃ o cáº£n hiá»‡n táº¡i trong dá»± Ã¡n cá»§a báº¡n
RÃ o cáº£n	Giáº£i thÃ­ch
âŒ MySQL lÃ  bottleneck	100.000 truy váº¥n ghi (insert order, update tickets) cÃ¹ng lÃºc â†’ ráº¥t dá»… ngháº½n, gÃ¢y deadlock
âŒ ChÆ°a cÃ³ load balancer / service scale	Spring Boot app chÆ°a deploy nhiá»u instance / container
âŒ Redis chÆ°a triá»ƒn khai tháº­t sá»±	Má»›i lÃªn flow Redis Lock nhÆ°ng chÆ°a cÃ³ lock thá»±c sá»± hoáº·c Redis Cluster
âŒ KhÃ´ng cÃ³ rate-limit	NgÆ°á»i dÃ¹ng/Ä‘á»‘i thá»§ cÃ³ thá»ƒ spam liÃªn tá»¥c
âŒ KhÃ´ng cÃ³ queue xá»­ lÃ½ async (Kafka/RabbitMQ)	Viá»‡c insert DB, gá»­i email, cáº­p nháº­t khÃ´ng Ä‘Æ°á»£c phÃ¢n tÃ¡n, dá»… ngháº½n I/O
âŒ FE chÆ°a cÃ³ throttle / debounce / kiá»ƒm soÃ¡t hÃ nh vi ngÆ°á»i dÃ¹ng	Dá»… sinh ra nhiá»u request trÃ¹ng láº·p

2. âœ… Nhá»¯ng Ä‘iá»ƒm máº¡nh giÃºp báº¡n scale
Äiá»ƒm máº¡nh	Chi tiáº¿t
âœ… CÃ³ Redis design sáºµn cho Lock vÃ©	Náº¿u dÃ¹ng tá»‘t Redis Lock + TTL, sáº½ giáº£m Ã¡p lá»±c DB
âœ… CÃ³ thiáº¿t káº¿ phÃ¢n lá»›p rÃµ (DDD)	Dá»… scale tá»«ng module nhÆ° ticket, order, payment
âœ… ÄÃ£ tÃ¡ch cÃ¡c action (táº¡o order, thanh toÃ¡n, cancel) theo tráº¡ng thÃ¡i	Giáº£m tÃ­nh â€œtá»©c thá»iâ€ vÃ  tÄƒng kháº£ nÄƒng batch xá»­ lÃ½

ğŸ“Š ÄÃ¡nh giÃ¡ thá»±c táº¿
Má»©c táº£i	Dá»± Ã¡n hiá»‡n táº¡i chá»‹u Ä‘Æ°á»£c?
1.000 user truy cáº­p cÃ¹ng lÃºc	âœ… CÃ³ thá»ƒ chá»‹u Ä‘Æ°á»£c náº¿u Redis Lock hoáº¡t Ä‘á»™ng
10.000 user truy cáº­p cÃ¹ng lÃºc	âš ï¸ Cáº§n test láº¡i vá»›i real Redis, tá»‘i Æ°u DB connection
100.000 user cÃ¹ng lÃºc	âŒ ChÆ°a chá»‹u ná»•i náº¿u khÃ´ng cÃ³: Redis cluster, load balancer, rate-limit, async queue, cache warmup, DB tuning

ğŸ§± Äá»ƒ há»‡ thá»‘ng chá»‹u Ä‘Æ°á»£c 100.000 request/s, báº¡n cáº§n:
âœ… 1. Redis Lock + TTL chuáº©n
Lock vÃ© theo ticketId:userId

TTL 15 phÃºt

Chá»‘ng race condition tá»‘t

âœ… 2. Queue xá»­ lÃ½ async (RabbitMQ, Kafka)
Khi submit order â†’ Ä‘Æ°a vÃ o queue â†’ worker xá»­ lÃ½ táº¡o order & DB

KhÃ´ng blocking request

âœ… 3. Rate limiting per IP/user
DÃ¹ng Redis + filter Ä‘á»ƒ giá»›i háº¡n 5â€“10 req/s/user

âœ… 4. Load balancer + horizontal scaling
Nhiá»u instance Spring Boot (Kubernetes / Docker)

Frontend Next.js build static, deploy CDN (Vercel)

âœ… 5. Preload cache vÃ  cache-aside strategy
Cache homepage, danh sÃ¡ch ticket, seat map...

Redis TTL cache 60â€“300s

âœ… 6. DB connection pool tuning
HikariCP config max pool size, timeout

Index chuáº©n trÃªn event_id, ticket_id, user_id

âœ… 7. Monitoring & Alert
DÃ¹ng Prometheus + Grafana Ä‘á»ƒ theo dÃµi response time, sá»‘ lÆ°á»£ng káº¿t ná»‘i, error rate

ğŸ“Œ Káº¿t luáº­n
CÃ¢u há»i	Tráº£ lá»i
Hiá»‡n táº¡i há»‡ thá»‘ng chá»‹u Ä‘Æ°á»£c 100.000 request/s khÃ´ng?	âŒ ChÆ°a
CÃ³ thá»ƒ nÃ¢ng cáº¥p Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c khÃ´ng?	âœ… HoÃ n toÃ n Ä‘Æ°á»£c, náº¿u Ã¡p dá»¥ng Redis Lock + Queue + Scaling há»£p lÃ½
MÃ¬nh cÃ³ há»— trá»£ Ä‘Æ°á»£c báº¡n lÃ m nhá»¯ng bÆ°á»›c Ä‘Ã³ khÃ´ng?	âœ… 100%. MÃ¬nh cÃ³ thá»ƒ gá»­i ngay file cáº¥u hÃ¬nh Redis Lock, queue async, scale-out Spring Boot, hoáº·c test JMeter/Gatling cho stress test